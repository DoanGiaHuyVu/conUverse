<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - conUverse</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/static/css/profile_page.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <!-- Mobile Search Bar -->
    <div class="mobile-search">
      <div class="input-group">
        <span class="input-group-text bg-white border-end-0">
          <i class="fas fa-search text-muted"></i>
        </span>
        <input
          type="text"
          class="form-control border-start-0"
          placeholder="Search with conUverse"
        />
        <a href="/notifications" class="btn btn-link text-decoration-none">
          <i class="fas fa-bell" style="color: #912338"></i>
        </a>
      </div>
    </div>

    <div class="container-fluid py-4">
      <div class="row">
        <!-- Left Sidebar -->
        <div class="col-md-3 col-lg-2 desktop-nav">
          <div class="sidebar sticky-top" style="top: 20px">
            <h5 class="navbar-brand mb-4">
              <a href="/about" class="text-decoration-none" style="color: #912338">
                <i class="fas fa-graduation-cap"></i> conUverse
              </a>
            </h5>
            <nav class="nav flex-column">
              <a class="nav-link" href="/home">
                <i class="fas fa-home"></i> Home
              </a>
              <a class="nav-link" href="/search">
                <i class="fas fa-search"></i> Search
              </a>
              <a class="nav-link" href="/discover">
                <i class="fas fa-compass"></i> Discover
              </a>
              <a class="nav-link" href="/messages">
                <i class="fas fa-envelope"></i> Messages
              </a>
              <a class="nav-link" href="/notifications">
                <i class="fas fa-bell"></i> Notifications
              </a>
              <a class="nav-link" href="/create">
                <i class="fas fa-plus-circle"></i> Create
              </a>
              <a class="nav-link active" href="/profile">
                <i class="fas fa-user"></i> Profile
              </a>
            </nav>
          </div>
        </div>

        <!-- Profile Content -->
        <div class="col-md-6 col-lg-6 content-area">
          <div class="profile-container">
            <div class="profile-header">
              <div class="profile-picture-container">
                <img
                  src="https://us.images.westend61.de/0001411501pw/portrait-of-confident-young-male-student-in-corridor-of-university-MASF19101.jpg"
                  alt="Profile Picture"
                  class="profile-avatar"
                />
              </div>
              <div class="profile-info">
                <div class="profile-top-row">
                  <h2 class="profile-username" id="profile-username">christ_miracle</h2>
                  <div class="profile-actions">
                    <button class="edit-profile-btn">Edit Profile</button>
                    <a href="/settings" class="settings-link"
                      ><i class="fas fa-cog"></i
                    ></a>
                  </div>
                </div>
                <div class="mobile-edit-container">
                  <button class="edit-profile-btn">Edit Profile</button>
                </div>
                <div class="profile-stats">
                  <div class="stat-item">
                    <span class="stat-count">42</span>
                    <span class="stat-label">posts</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-count">125</span>
                    <span class="stat-label">friends</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-count">98</span>
                    <span class="stat-label">following</span>
                  </div>
                </div>
                <div class="profile-bio">
                  <h1 class="profile-name" id="profile-name">Christ Miracle</h1>
                  <div class="profile-details">
                    <p>Computer Science | 3rd Year</p>
                    <p>Concordia University</p>
                    <p id="profile-bio">Passionate about coding and design. Always learning something new! ðŸš€</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tabs (Photos, Courses, Events) -->
            <!-- ... Keep your tab layout unchanged ... -->
          </div>
        </div>

        <!-- Create Button -->
        <div class="create-btn d-md-none">
          <i class="fas fa-plus"></i>
        </div>

        <!-- Mobile Nav -->
        <div class="mobile-nav">
          <a href="/home" class="mobile-nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
          </a>
          <a href="/discover" class="mobile-nav-item">
            <i class="fas fa-compass"></i>
            <span>Discover</span>
          </a>
          <a href="/create" class="mobile-nav-item">
            <i class="fas fa-plus-circle"></i>
            <span>Create</span>
          </a>
          <a href="/messages" class="mobile-nav-item">
            <i class="fas fa-envelope"></i>
            <span>Messages</span>
          </a>
          <a href="/profile" class="mobile-nav-item active">
            <i class="fas fa-user"></i>
            <span>Profile</span>
          </a>
        </div>
      </div>
    </div>

    <!-- JS to populate profile -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/whoami")
          .then((res) => res.json())
          .then((user) => {
            if (user.error) {
              console.error("Not logged in");
              return;
            }

            const usernameEl = document.getElementById("profile-username");
            const nameEl = document.getElementById("profile-name");
            const bioEl = document.getElementById("profile-bio");

            if (usernameEl) usernameEl.textContent = user.username || "anonymous";
            if (nameEl) nameEl.textContent = user.name || "Student Name";
            if (bioEl) bioEl.textContent =
              user.bio || "Passionate about coding and design. Always learning something new! ðŸš€";
          })
          .catch((err) => console.error("Error fetching user info:", err));
      });
    </script>
  </body>
</html>
